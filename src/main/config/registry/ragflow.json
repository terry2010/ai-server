{
  "name": "ragflow",
  "type": "feature",
  "dependsOn": ["mysql", "redis", "minio", "elasticsearch"],
  "ports": [
    { "container": 80, "host": "${RAGFLOW_PORT:18600}", "bind": "${BIND_ADDRESS:127.0.0.1}" }
  ],
  "variables": {
    "RAGFLOW_PORT": "${RAGFLOW_PORT:18600}",
    "BIND_ADDRESS": "${BIND_ADDRESS:127.0.0.1}",
    "ES_HOST": "${ES_HOST:ai-elasticsearch}",
    "ES_USER": "${ES_USER:elastic}",
    "ELASTIC_PASSWORD": "${ELASTIC_PASSWORD:infini_rag_flow}",
    "MINIO_HOST": "${MINIO_HOST:ai-minio}",
    "MYSQL_HOST": "${MYSQL_HOST:ai-mysql}",
    "REDIS_HOST": "${REDIS_HOST:ai-redis}",
    "REDIS_DB": "${REDIS_DB:1}",
    "REDIS_PASSWORD": "${REDIS_PASSWORD:infini_rag_flow}"
  },
  "volumes": [
    { "host": "c:\\code\\ai-server\\orchestration\\modules\\ragflow\\nginx\\ragflow.conf", "container": "/etc/nginx/conf.d/ragflow.conf" },
    { "host": "c:\\code\\ai-server\\orchestration\\modules\\ragflow\\nginx\\ragflow.conf", "container": "/etc/nginx/http.d/ragflow.conf" },
    { "host": "c:\\code\\ai-server\\orchestration\\modules\\ragflow\\nginx\\sites-enabled-empty", "container": "/etc/nginx/sites-enabled" }
  ],
  "healthCheck": { "type": "http", "target": "http://localhost:${RAGFLOW_PORT:18600}/v1/system/config", "interval": 3000, "timeout": 30000, "retries": 80 },
  "compose": { "templateRef": "docker-compose.feature.yml" }
}
