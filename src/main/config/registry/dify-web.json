{
  "name": "dify-web",
  "type": "feature",
  "dependsOn": ["dify"],
  "image": "langgenius/dify-web:latest",
  "ports": [
    { "container": 3000, "host": "${DIFY_WEB_PORT:18090}", "bind": "${BIND_ADDRESS:127.0.0.1}" }
  ],
  "env": {
    "PORT": "3000",
    "HOSTNAME": "0.0.0.0",
    "NEXT_PUBLIC_API_PREFIX": "http://host.docker.internal:${DIFY_API_PORT:18091}/console/api",
    "NEXT_PUBLIC_PUBLIC_API_PREFIX": "http://host.docker.internal:${DIFY_API_PORT:18091}/api",
    "CONSOLE_API_URL": "http://host.docker.internal:${DIFY_API_PORT:18091}",
    "APP_API_URL": "http://host.docker.internal:${DIFY_API_PORT:18091}"
  },
  "variables": {
    "DIFY_WEB_PORT": "${DIFY_WEB_PORT:18090}",
    "DIFY_API_PORT": "${DIFY_API_PORT:18091}",
    "BIND_ADDRESS": "${BIND_ADDRESS:127.0.0.1}"
  },
  "healthCheck": { "type": "http", "target": "http://localhost:${DIFY_WEB_PORT:18090}/", "interval": 2000, "timeout": 20000, "retries": 30 },
  "compose": { "templateRef": "docker-compose.feature.yml" }
}
